[{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\board.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\boardTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\hero.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\heroTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\linkedChildTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\linkedChildren.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\linkedChildren\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\pinManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\pinManager\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\questTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\quests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\quests\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\redemptionTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\redemptions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'heroId' is defined but never used.","line":75,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport { redemptionRepository } from '@data/repositories/redemptionRepository';\nimport type { Redemption } from './redemptionTypes';\nimport { formatDatabaseError } from '../utils/errorMessages';\nimport { cacheKeys, cacheTtlMs, loadCachedState, saveCachedState } from './stateCache';\nimport { clampNumber } from './stateValidation';\n\ntype RedemptionsHook = {\n  redemptions: Redemption[];\n  loading: boolean;\n  error: string | null;\n  redeemReward: (heroId: string, rewardId: string, pointsSpent: number) => Promise<void>;\n  refreshRedemptions: (heroId: string) => Promise<void>;\n};\n\nexport function useRedemptions(heroId: string): RedemptionsHook {\n  const [redemptions, setRedemptions] = useState<Redemption[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const redemptionsRef = useRef<Redemption[]>([]);\n\n  const loadRedemptions = async (options?: { silent?: boolean }) => {\n    try {\n      if (!options?.silent) {\n        setLoading(true);\n      }\n      const redemptionsData = await redemptionRepository.getByHeroId(heroId);\n      setRedemptions(redemptionsData);\n      setError(null);\n    } catch (err) {\n      setError(formatDatabaseError('loading redemptions', err));\n      setRedemptions([]);\n    } finally {\n      if (!options?.silent) {\n        setLoading(false);\n      }\n    }\n  };\n\n  const redeemReward = async (heroId: string, rewardId: string, pointsSpent: number) => {\n    if (!heroId || !rewardId) {\n      setError('Reward redemption requires a hero and reward.');\n      return;\n    }\n\n    const safePoints = clampNumber(pointsSpent, 0, 100000);\n    const now = new Date().toISOString();\n    const tempId = `temp-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n    const optimisticRedemption: Redemption = {\n      id: tempId,\n      heroId,\n      rewardId,\n      pointsSpent: safePoints,\n      redeemedAt: now,\n      notes: null\n    };\n    const previous = redemptionsRef.current;\n    setRedemptions([...previous, optimisticRedemption]);\n\n    try {\n      const id = await redemptionRepository.create({ heroId, rewardId, pointsSpent: safePoints });\n      const saved = await redemptionRepository.getById(id);\n      if (saved) {\n        setRedemptions(prev => prev.map(item => (item.id === tempId ? saved : item)));\n      } else {\n        setRedemptions(prev => prev.filter(item => item.id !== tempId));\n      }\n      setError(null);\n    } catch (err) {\n      setRedemptions(previous);\n      setError(formatDatabaseError('redeeming a reward', err));\n    }\n  };\n\n  const refreshRedemptions = async (heroId: string) => {\n    await loadRedemptions();\n  };\n\n  useEffect(() => {\n    redemptionsRef.current = redemptions;\n  }, [redemptions]);\n\n  useEffect(() => {\n    if (heroId) {\n      const cacheKey = cacheKeys.redemptions(heroId);\n      const cached = loadCachedState<Redemption[]>(cacheKey, cacheTtlMs.redemptions);\n      if (cached) {\n        setRedemptions(cached);\n        setLoading(false);\n      }\n      loadRedemptions({ silent: !!cached });\n    }\n  }, [heroId]);\n\n  useEffect(() => {\n    if (heroId) {\n      saveCachedState(cacheKeys.redemptions(heroId), redemptions);\n    }\n  }, [heroId, redemptions]);\n\n  return {\n    redemptions,\n    loading,\n    error,\n    redeemReward,\n    refreshRedemptions\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\rewardTypes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\rewards.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\rewards\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\stateCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\ColeS\\Documents\\Python_Scripts\\Sibling_Helper\\parent-app\\src\\state\\stateValidation.ts","messages":[{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00, \\x1f.","line":1,"column":23,"nodeType":"Literal","messageId":"unexpected","endLine":1,"endColumn":47}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const CONTROL_CHARS = /[\\u0000-\\u001f\\u007f]/g;\n\nexport const sanitizeText = (value: string, maxLength: number) => {\n  return value.replace(CONTROL_CHARS, '').trim().slice(0, maxLength);\n};\n\nexport const sanitizeOptionalText = (value?: string | null, maxLength = 200): string | null => {\n  if (value == null) return null;\n  const sanitized = sanitizeText(value, maxLength);\n  return sanitized.length > 0 ? sanitized : null;\n};\n\nexport const clampNumber = (value: number, min: number, max: number) => {\n  if (!Number.isFinite(value)) return min;\n  return Math.min(max, Math.max(min, value));\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]